# ================================================================
# GANN QUANT AI - STRATEGY CONFIGURATION v3.0 (MASTER)
# ================================================================

version: "3.0.0"
environment: "production" # development | staging | production

# ================================================================
# STRATEGY ENSEMBLE CONFIGURATION
# ================================================================
ensemble:
  enabled: true
  mode: "weighted_voting"  # weighted_voting | stacking | blending | dynamic
  
  # Individual strategy weights (must sum to 1.0)
  weights:
    gann_geometry: 0.25
    astro_cycles: 0.15
    ehlers_dsp: 0.20
    ml_models: 0.25
    pattern_recognition: 0.10
    options_flow: 0.05
  
  # Minimum strategies that must agree for signal
  min_consensus: 3
  
  # Confidence threshold for trade execution (0-1)
  min_confidence: 0.65
  
  # Dynamic weight adjustment based on performance
  adaptive_weights:
    enabled: true
    lookback_period: 90  # days
    rebalance_frequency: "weekly"  # daily | weekly | monthly
    performance_metric: "sharpe_ratio"  # sharpe_ratio | sortino | calmar

# ================================================================
# ACTIVE STRATEGIES
# ================================================================
active_strategies:
  
  # Gann Geometry Strategy
  gann_strategy:
    enabled: true
    priority: 1
    timeframes: ["D1", "H4", "H1"]
    
    components:
      square_of_9: true
      square_of_52: true
      square_of_144: true
      square_of_90: true
      square_of_24: true
      gann_angles: true
      gann_waves: true
      time_cycles: true
      forecasting: true
    
    signal_strength:
      strong: 0.80  # Multiple Gann levels confluence
      medium: 0.60  # Single major level
      weak: 0.40    # Minor level
  
  # Astro Cycles Strategy
  astro_strategy:
    enabled: true
    priority: 2
    
    aspects:
      major: ["conjunction", "opposition", "square", "trine"]
      minor: ["sextile", "quincunx", "semisquare"]
      
    planets:
      fast_moving: ["Mercury", "Venus", "Mars"]
      slow_moving: ["Jupiter", "Saturn"]
      outer: ["Uranus", "Neptune", "Pluto"]
      
    weights:
      fast_moving: 0.30
      slow_moving: 0.50
      outer: 0.20
  
  # Ehlers DSP Strategy
  ehlers_strategy:
    enabled: true
    priority: 1
    
    indicators:
      - name: "MAMA"
        weight: 0.25
      - name: "fisher_transform"
        weight: 0.20
      - name: "cyber_cycle"
        weight: 0.20
      - name: "roofing_filter"
        weight: 0.15
      - name: "super_smoother"
        weight: 0.15
      - name: "sinewave"
        weight: 0.05
  
  # Machine Learning Strategy
  ml_strategy:
    enabled: true
    priority: 1
    
    models:
      - name: "lstm_price_predictor"
        weight: 0.30
        input_features: 50
        lookback: 60
        
      - name: "transformer_trend"
        weight: 0.25
        attention_heads: 8
        
      - name: "xgboost_classifier"
        weight: 0.25
        n_estimators: 500
        
      - name: "random_forest_ensemble"
        weight: 0.20
        n_estimators: 300
    
    feature_sets:
      - "gann_features"
      - "ehlers_features"
      - "astro_features"
      - "technical_features"
      - "market_microstructure"
  
  # Pattern Recognition Strategy
  pattern_strategy:
    enabled: true
    priority: 2
    
    patterns:
      candlestick:
        enabled: true
        count: 180  # Database size
        min_quality: 0.70
        
      harmonic:
        enabled: true
        types: ["gartley", "butterfly", "bat", "crab", "cypher"]
        
      geometric:
        enabled: true
        types: ["head_shoulders", "triangle", "wedge", "channel"]
  
  # Options Flow Strategy
  options_strategy:
    enabled: true
    priority: 3
    
    signals:
      - "unusual_volume"
      - "dark_pool_activity"
      - "put_call_ratio"
      - "max_pain"
      - "gamma_squeeze"
      - "skew_analysis"

# ================================================================
# TRADING MODES
# ================================================================
trading_mode:
  mode: "hybrid"  # conservative | moderate | aggressive | hybrid
  
  # Mode-specific parameters
  conservative:
    max_positions: 3
    position_size: 0.02  # 2% per trade
    min_rr: 3.0
    min_confidence: 0.80
    
  moderate:
    max_positions: 5
    position_size: 0.03  # 3% per trade
    min_rr: 2.5
    min_confidence: 0.70
    
  aggressive:
    max_positions: 8
    position_size: 0.05  # 5% per trade
    min_rr: 2.0
    min_confidence: 0.60
    
  hybrid:
    # Adjusts based on market regime
    volatility_adjusted: true
    regime_detection: true
    
    regimes:
      trending:
        max_positions: 6
        position_size: 0.04
        min_rr: 2.5
        
      ranging:
        max_positions: 4
        position_size: 0.03
        min_rr: 3.0
        
      volatile:
        max_positions: 2
        position_size: 0.02
        min_rr: 3.5

# ================================================================
# TIMEFRAME CONFIGURATION
# ================================================================
timeframes:
  primary: "H4"
  secondary: ["D1", "H1"]
  
  # Multi-timeframe analysis
  mtf_analysis:
    enabled: true
    alignment_required: true
    
    hierarchy:
      long_term: "W1"    # Trend
      medium_term: "D1"  # Structure
      short_term: "H4"   # Entry
      execution: "H1"    # Precision
      
  # Timeframe weights for signal generation
  weights:
    W1: 0.10
    D1: 0.35
    H4: 0.35
    H1: 0.20

# ================================================================
# SIGNAL FILTERING
# ================================================================
signal_filter:
  
  # Time filters
  time_filter:
    enabled: true
    avoid_news: true
    news_buffer_minutes: 30
    
    trading_sessions:
      london: true
      new_york: true
      tokyo: false
      sydney: false
    
    excluded_days: ["saturday", "sunday"]
    excluded_hours: [0, 1, 22, 23]  # UTC hours to avoid
  
  # Market condition filters
  market_filter:
    min_volatility: 0.5  # ATR-based
    max_volatility: 3.0
    
    min_volume: 1000  # contracts/lots
    
    spread_filter:
      enabled: true
      max_spread_pips: 3.0
      max_spread_percent: 0.1
  
  # Technical filters
  technical_filter:
    trend_alignment: true
    support_resistance: true
    volume_confirmation: true
    
    avoid_choppy_markets:
      enabled: true
      adx_threshold: 25

# ================================================================
# FORECASTING CONFIGURATION
# ================================================================
forecasting:
  enabled: true
  
  # Daily price/time forecasting
  daily_forecast:
    enabled: true
    horizon_days: 365
    methods: ["gann_wave", "astro_cycle", "ml_hybrid"]
    
  # ATH/ATL prediction
  extremes_prediction:
    enabled: true
    methods: ["gann_spiral", "fibonacci_time", "planetary_aspects"]
    confidence_threshold: 0.75
  
  # Output format
  output:
    format: ["html", "csv", "json"]
    visualizations: true
    polar_charts: true
    time_price_grid: true

# ================================================================
# PERFORMANCE TRACKING
# ================================================================
performance:
  metrics:
    - "total_return"
    - "sharpe_ratio"
    - "sortino_ratio"
    - "calmar_ratio"
    - "max_drawdown"
    - "win_rate"
    - "profit_factor"
    - "expectancy"
  
  benchmarks:
    - "SPY"
    - "QQQ"
    - "buy_and_hold"
  
  reporting:
    frequency: "daily"
    detailed_report: "weekly"
    performance_review: "monthly"

# ================================================================
# SYSTEM SETTINGS
# ================================================================
system:
  logging:
    level: "INFO"  # DEBUG | INFO | WARNING | ERROR
    file_rotation: "daily"
    max_size_mb: 100
    retention_days: 90
  
  monitoring:
    enabled: true
    health_check_interval: 60  # seconds
    alert_on_error: true
    
  backup:
    enabled: true
    frequency: "hourly"
    retention_days: 30
    
  # Performance optimization
  optimization:
    cache_enabled: true
    cache_ttl: 300  # seconds
    parallel_processing: true
    max_workers: 8

# ================================================================
# EMERGENCY CONTROLS
# ================================================================
emergency:
  kill_switch:
    enabled: true
    triggers:
      - max_daily_loss: -0.05  # -5%
      - max_drawdown: -0.15    # -15%
      - consecutive_losses: 5
      - system_error: true
  
  circuit_breaker:
    enabled: true
    cooldown_minutes: 30
    auto_restart: false
  
  fallback_mode:
    enabled: true
    strategy: "close_all_positions"  # close_all | reduce_exposure | hedge